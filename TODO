- PRINT、WRITE、READ、INPUT、DIM、NEXT 不能以 ELSE 结束？
- 同名的数组只能定义一个？
- [x] 所有 parse_expr （所有extend_symbol）前面要 reset first_symbols
- [x] match多个token时 first_symbols 不对（match_token只能处理单个token的情况）
- READ、键盘 INPUT 输入实数，忽略实数后面的字符串？文件 INPUT 输入实数，实数后面不行？
- FOR、FN的函数名和参数只能是实数？
- WRITE 输出0x00后面的引号？剔除 0x1f？
- OPEN 文件名以0x00结尾？
- [x] editor 一行文本最长多长？包含中文呢？
  94字符；中文不考虑0x1f
- [x] tokenize 关键字只识别前缀？（IFA 会当成 IF A）
  NO
- [x] 如果光标在中文的第二个字节，光标在什么位置闪烁？在中文的位置闪烁还是实际的光标位置闪烁？
  实际的光标位置
- [x] 当光标在第一列时，无论调用多少次空的 PRINT，都不会换行？
  yes
- 输入的内容不会导致后面的字符变成 NUL ？
- [x] LOCATE 5,20:PRINT 0; 会不会换行？
  yes
- 看看TC808和PC1000A的键值和映射
- 检查一下：emoji 的第二个字节小于161也合法，怎么对应字符？pc1000a是否一样支持？校对一下tc808和pc1000a的emoji的编码
- [x] 按键映射一个地址只能响应一个键？
  NO


- 关联 .bas  .lav  .pac 文件
- [x] 在运行模拟器时不能加载其他文件
- 检查内存泄漏
- 改成GBK（有些汉字会和emoji重叠，优先使用emoji）


- document:
    + create new: () => (document, string)
    + ~~get path: () => option<path>~~
    + [x] load bas/txt: path -> (document, string)
    + [x] save: option<path> -> ()
    + [x] diagnostics: () -> vec
    + auto completion: () -> completion list
    + [x] compile to vm: device -> vm
    + set machine name: string -> ()
    + get machine name: () -> string
    + [x] edit: edit list -> ()
    + get semantic token: () -> vec
    + symbol highlight: () -> vec
    + [x] create device: () -> device
- vm:
    - [x] compile expr to InputFuncBody: string -> body
    - [x] exec: input -> exec result
    - [x] start
    - [x] stop
- mbf5:
    - [x] parse string: string -> result<mbf5>
- device:
    - [x] get graphics data
    - [x] get key
    - [x] fire key down
    - [x] fire key up
    - [x] blink cursor: () -> ()
    - [x] get screen update rect
    - [x] reset

- 设置：
    - 字体大小
    - gvb: 屏幕放大倍数

- 状态：
    - 窗口大小、窗口位置
    - 上一次打开的文件
    - 上一次的文件光标位置
    - 上一次加载文件的目录
